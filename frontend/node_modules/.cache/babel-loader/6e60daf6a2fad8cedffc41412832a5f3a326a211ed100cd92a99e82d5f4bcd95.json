{"ast":null,"code":"export default {\n  name: 'ProfileView',\n  data() {\n    return {\n      editProfileDialog: false,\n      user: {\n        id: 1,\n        name: '当前用户',\n        username: 'current_user',\n        email: 'user@example.com',\n        bio: '这是一个个人简介示例',\n        avatar: 'https://cdn.vuetifyjs.com/images/john.jpg',\n        created_at: '2023-01-15T10:30:00Z'\n      },\n      editedUser: {\n        username: '',\n        name: '',\n        bio: '',\n        avatarFile: null\n      },\n      userPosts: [{\n        id: 1,\n        title: '我的大学生活',\n        content: '今天是开学第一天，认识了很多新朋友，期待这学期的精彩生活！',\n        created_at: '2023-09-01T10:30:00Z',\n        likes_count: 12,\n        comments_count: 5,\n        liked: false\n      }, {\n        id: 2,\n        title: '推荐一本好书',\n        content: '最近读了《百年孤独》，马尔克斯的魔幻现实主义真的很棒，值得推荐给大家。',\n        created_at: '2023-09-10T15:45:00Z',\n        likes_count: 8,\n        comments_count: 3,\n        liked: true\n      }],\n      userExchanges: [{\n        id: 1,\n        title: '旧教材出售',\n        description: '大一使用的高数、英语等教材，几乎全新',\n        category: '图书教材',\n        condition: '几乎全新',\n        image_urls: 'https://images.unsplash.com/photo-1544947950-fa07a98d237f?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',\n        created_at: '2023-09-15T10:30:00Z',\n        is_available: true\n      }, {\n        id: 2,\n        title: '二手自行车',\n        description: '仅使用了一个学期的山地车，性能良好',\n        category: '交通工具',\n        condition: '良好',\n        image_urls: 'https://images.unsplash.com/photo-1532298229144-0ec0c57515c7?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',\n        created_at: '2023-09-18T14:20:00Z',\n        is_available: false\n      }],\n      exchangeHeaders: [{\n        title: '图片',\n        key: 'image_urls',\n        sortable: false\n      }, {\n        title: '物品名称',\n        key: 'title'\n      }, {\n        title: '类别',\n        key: 'category'\n      }, {\n        title: '状态',\n        key: 'condition'\n      }, {\n        title: '操作',\n        key: 'actions',\n        sortable: false\n      }]\n    };\n  },\n  mounted() {\n    this.resetEditUser();\n  },\n  methods: {\n    resetEditUser() {\n      this.editedUser = {\n        username: this.user.username,\n        name: this.user.name,\n        bio: this.user.bio,\n        avatarFile: null\n      };\n    },\n    formatDate(dateString) {\n      const date = new Date(dateString);\n      return date.toLocaleDateString();\n    },\n    toggleLike(post) {\n      post.liked = !post.liked;\n      post.likes_count += post.liked ? 1 : -1;\n    },\n    deletePost(postId) {\n      if (confirm('确定要删除这个动态吗？')) {\n        this.userPosts = this.userPosts.filter(post => post.id !== postId);\n      }\n    },\n    deleteExchange(exchangeId) {\n      if (confirm('确定要删除这个置换物品吗？')) {\n        this.userExchanges = this.userExchanges.filter(ex => ex.id !== exchangeId);\n      }\n    },\n    editExchange(exchange) {\n      console.log('编辑物品:', exchange);\n      // 这里可以打开编辑对话框\n    },\n    saveProfile() {\n      // 更新用户信息\n      this.user.username = this.editedUser.username;\n      this.user.name = this.editedUser.name;\n      this.user.bio = this.editedUser.bio;\n      if (this.editedUser.avatarFile) {\n        // 这里应该是上传头像的逻辑\n        console.log('上传新头像:', this.editedUser.avatarFile);\n      }\n      this.editProfileDialog = false;\n      // 这里应该是实际的API调用\n      console.log('更新用户资料:', this.user);\n    }\n  }\n};","map":{"version":3,"names":["name","data","editProfileDialog","user","id","username","email","bio","avatar","created_at","editedUser","avatarFile","userPosts","title","content","likes_count","comments_count","liked","userExchanges","description","category","condition","image_urls","is_available","exchangeHeaders","key","sortable","mounted","resetEditUser","methods","formatDate","dateString","date","Date","toLocaleDateString","toggleLike","post","deletePost","postId","confirm","filter","deleteExchange","exchangeId","ex","editExchange","exchange","console","log","saveProfile"],"sources":["C:\\Users\\xueru\\Desktop\\my-project\\frontend\\src\\views\\Profile.vue"],"sourcesContent":["<template>\n  <v-container>\n    <v-row>\n      <v-col cols=\"12\" md=\"4\">\n        <v-card>\n          <v-card-title class=\"headline\">个人信息</v-card-title>\n          \n          <v-card-text>\n            <v-avatar size=\"100\" class=\"mb-4\">\n              <v-img :src=\"user.avatar\" alt=\"Avatar\"></v-img>\n            </v-avatar>\n            \n            <div class=\"text-h6\">{{ user.name }}</div>\n            <div class=\"text-subtitle-1 grey--text\">{{ user.email }}</div>\n            \n            <v-divider class=\"my-4\"></v-divider>\n            \n            <div class=\"mb-2\">\n              <strong>用户名:</strong> {{ user.username }}\n            </div>\n            <div class=\"mb-2\">\n              <strong>简介:</strong> {{ user.bio || '暂无简介' }}\n            </div>\n            <div class=\"mb-2\">\n              <strong>注册时间:</strong> {{ formatDate(user.created_at) }}\n            </div>\n          </v-card-text>\n          \n          <v-card-actions>\n            <v-btn color=\"primary\" block @click=\"editProfileDialog = true\">编辑资料</v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-col>\n      \n      <v-col cols=\"12\" md=\"8\">\n        <v-card>\n          <v-card-title class=\"headline\">我的动态</v-card-title>\n          \n          <v-card-text>\n            <div v-if=\"userPosts.length === 0\" class=\"text-center py-8\">\n              <p class=\"text-h6\">还没有发布任何动态</p>\n              <v-btn color=\"primary\" to=\"/post\" class=\"mt-4\">发布第一篇动态</v-btn>\n            </div>\n            \n            <div v-else>\n              <div v-for=\"post in userPosts\" :key=\"post.id\" class=\"mb-4\">\n                <v-card outlined>\n                  <v-card-title>{{ post.title }}</v-card-title>\n                  <v-card-subtitle>{{ formatDate(post.created_at) }}</v-card-subtitle>\n                  <v-card-text>{{ post.content }}</v-card-text>\n                  \n                  <v-card-actions>\n                    <v-btn variant=\"text\" @click=\"toggleLike(post)\">\n                      <v-icon :color=\"post.liked ? 'red' : ''\">\n                        {{ post.liked ? 'mdi-heart' : 'mdi-heart-outline' }}\n                      </v-icon>\n                      <span class=\"ml-1\">{{ post.likes_count }}</span>\n                    </v-btn>\n                    \n                    <v-btn variant=\"text\">\n                      <v-icon>mdi-comment-outline</v-icon>\n                      <span class=\"ml-1\">{{ post.comments_count }}</span>\n                    </v-btn>\n                    \n                    <v-spacer></v-spacer>\n                    \n                    <v-btn variant=\"text\" @click=\"deletePost(post.id)\">\n                      <v-icon color=\"error\">mdi-delete</v-icon>\n                    </v-btn>\n                  </v-card-actions>\n                </v-card>\n              </div>\n            </div>\n          </v-card-text>\n        </v-card>\n        \n        <v-card class=\"mt-6\">\n          <v-card-title class=\"headline\">我的置换物品</v-card-title>\n          \n          <v-card-text>\n            <div v-if=\"userExchanges.length === 0\" class=\"text-center py-8\">\n              <p class=\"text-h6\">还没有发布任何置换物品</p>\n              <v-btn color=\"primary\" to=\"/exchange\" class=\"mt-4\">发布置换物品</v-btn>\n            </div>\n            \n            <div v-else>\n              <v-data-table\n                :headers=\"exchangeHeaders\"\n                :items=\"userExchanges\"\n                class=\"elevation-1\"\n              >\n                <template v-slot:item.image_urls=\"{ item }\">\n                  <v-img \n                    v-if=\"item.image_urls\" \n                    :src=\"item.image_urls.split(',')[0]\" \n                    max-height=\"60\" \n                    max-width=\"60\" \n                    class=\"rounded\"\n                  ></v-img>\n                </template>\n                <template v-slot:item.actions=\"{ item }\">\n                  <v-btn icon @click=\"editExchange(item)\">\n                    <v-icon>mdi-pencil</v-icon>\n                  </v-btn>\n                  <v-btn icon @click=\"deleteExchange(item.id)\">\n                    <v-icon color=\"error\">mdi-delete</v-icon>\n                  </v-btn>\n                </template>\n              </v-data-table>\n            </div>\n          </v-card-text>\n        </v-card>\n      </v-col>\n    </v-row>\n    \n    <!-- 编辑资料对话框 -->\n    <v-dialog v-model=\"editProfileDialog\" max-width=\"500\">\n      <v-card>\n        <v-card-title>编辑资料</v-card-title>\n        \n        <v-card-text>\n          <v-form ref=\"profileForm\">\n            <v-text-field\n              v-model=\"editedUser.username\"\n              label=\"用户名\"\n              variant=\"outlined\"\n              required\n            ></v-text-field>\n            \n            <v-text-field\n              v-model=\"editedUser.name\"\n              label=\"姓名\"\n              variant=\"outlined\"\n              required\n            ></v-text-field>\n            \n            <v-textarea\n              v-model=\"editedUser.bio\"\n              label=\"个人简介\"\n              variant=\"outlined\"\n              auto-grow\n              rows=\"2\"\n            ></v-textarea>\n            \n            <v-file-input\n              v-model=\"editedUser.avatarFile\"\n              label=\"头像\"\n              prepend-icon=\"mdi-camera\"\n              variant=\"outlined\"\n            ></v-file-input>\n          </v-form>\n        </v-card-text>\n        \n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"secondary\" @click=\"editProfileDialog = false\">取消</v-btn>\n          <v-btn color=\"primary\" @click=\"saveProfile\">保存</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-container>\n</template>\n\n<script>\nexport default {\n  name: 'ProfileView',\n  data() {\n    return {\n      editProfileDialog: false,\n      user: {\n        id: 1,\n        name: '当前用户',\n        username: 'current_user',\n        email: 'user@example.com',\n        bio: '这是一个个人简介示例',\n        avatar: 'https://cdn.vuetifyjs.com/images/john.jpg',\n        created_at: '2023-01-15T10:30:00Z'\n      },\n      editedUser: {\n        username: '',\n        name: '',\n        bio: '',\n        avatarFile: null\n      },\n      userPosts: [\n        {\n          id: 1,\n          title: '我的大学生活',\n          content: '今天是开学第一天，认识了很多新朋友，期待这学期的精彩生活！',\n          created_at: '2023-09-01T10:30:00Z',\n          likes_count: 12,\n          comments_count: 5,\n          liked: false\n        },\n        {\n          id: 2,\n          title: '推荐一本好书',\n          content: '最近读了《百年孤独》，马尔克斯的魔幻现实主义真的很棒，值得推荐给大家。',\n          created_at: '2023-09-10T15:45:00Z',\n          likes_count: 8,\n          comments_count: 3,\n          liked: true\n        }\n      ],\n      userExchanges: [\n        {\n          id: 1,\n          title: '旧教材出售',\n          description: '大一使用的高数、英语等教材，几乎全新',\n          category: '图书教材',\n          condition: '几乎全新',\n          image_urls: 'https://images.unsplash.com/photo-1544947950-fa07a98d237f?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',\n          created_at: '2023-09-15T10:30:00Z',\n          is_available: true\n        },\n        {\n          id: 2,\n          title: '二手自行车',\n          description: '仅使用了一个学期的山地车，性能良好',\n          category: '交通工具',\n          condition: '良好',\n          image_urls: 'https://images.unsplash.com/photo-1532298229144-0ec0c57515c7?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80',\n          created_at: '2023-09-18T14:20:00Z',\n          is_available: false\n        }\n      ],\n      exchangeHeaders: [\n        { title: '图片', key: 'image_urls', sortable: false },\n        { title: '物品名称', key: 'title' },\n        { title: '类别', key: 'category' },\n        { title: '状态', key: 'condition' },\n        { title: '操作', key: 'actions', sortable: false }\n      ]\n    };\n  },\n  mounted() {\n    this.resetEditUser();\n  },\n  methods: {\n    resetEditUser() {\n      this.editedUser = {\n        username: this.user.username,\n        name: this.user.name,\n        bio: this.user.bio,\n        avatarFile: null\n      };\n    },\n    formatDate(dateString) {\n      const date = new Date(dateString);\n      return date.toLocaleDateString();\n    },\n    toggleLike(post) {\n      post.liked = !post.liked;\n      post.likes_count += post.liked ? 1 : -1;\n    },\n    deletePost(postId) {\n      if (confirm('确定要删除这个动态吗？')) {\n        this.userPosts = this.userPosts.filter(post => post.id !== postId);\n      }\n    },\n    deleteExchange(exchangeId) {\n      if (confirm('确定要删除这个置换物品吗？')) {\n        this.userExchanges = this.userExchanges.filter(ex => ex.id !== exchangeId);\n      }\n    },\n    editExchange(exchange) {\n      console.log('编辑物品:', exchange);\n      // 这里可以打开编辑对话框\n    },\n    saveProfile() {\n      // 更新用户信息\n      this.user.username = this.editedUser.username;\n      this.user.name = this.editedUser.name;\n      this.user.bio = this.editedUser.bio;\n      \n      if (this.editedUser.avatarFile) {\n        // 这里应该是上传头像的逻辑\n        console.log('上传新头像:', this.editedUser.avatarFile);\n      }\n      \n      this.editProfileDialog = false;\n      // 这里应该是实际的API调用\n      console.log('更新用户资料:', this.user);\n    }\n  }\n};\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}