{"ast":null,"code":"export default {\n  name: 'PostCard',\n  props: {\n    post: {\n      type: Object,\n      required: true\n    }\n  },\n  data() {\n    return {\n      showComments: false,\n      newComment: ''\n    };\n  },\n  methods: {\n    formatDate(dateString) {\n      const date = new Date(dateString);\n      return date.toLocaleString();\n    },\n    toggleLike(post) {\n      post.liked = !post.liked;\n      post.likes_count += post.liked ? 1 : -1;\n    },\n    toggleComment() {\n      this.showComments = !this.showComments;\n    },\n    addComment() {\n      if (!this.newComment.trim()) return;\n\n      // 这里应该调用API添加评论\n      const comment = {\n        id: Date.now(),\n        author_name: '当前用户',\n        content: this.newComment,\n        avatar: 'https://cdn.vuetifyjs.com/images/john.jpg'\n      };\n      if (!this.post.comments) {\n        this.post.comments = [];\n      }\n      this.post.comments.push(comment);\n      this.post.comments_count += 1;\n      this.newComment = '';\n    },\n    sharePost() {\n      // 分享功能\n      console.log('分享帖子:', this.post.id);\n    }\n  }\n};","map":{"version":3,"names":["name","props","post","type","Object","required","data","showComments","newComment","methods","formatDate","dateString","date","Date","toLocaleString","toggleLike","liked","likes_count","toggleComment","addComment","trim","comment","id","now","author_name","content","avatar","comments","push","comments_count","sharePost","console","log"],"sources":["C:\\Users\\xueru\\Desktop\\my-project\\frontend\\src\\components\\PostCard.vue"],"sourcesContent":["<template>\n  <v-card class=\"mb-4\">\n    <v-card-title>\n      <v-avatar size=\"40\" class=\"mr-3\">\n        <v-img :src=\"post.avatar || 'https://cdn.vuetifyjs.com/images/john.jpg'\" alt=\"Author\"></v-img>\n      </v-avatar>\n      <div>\n        <div class=\"font-weight-bold\">{{ post.author_name }}</div>\n        <div class=\"text-caption\">{{ formatDate(post.created_at) }}</div>\n      </div>\n    </v-card-title>\n\n    <v-card-text>\n      <h3 class=\"headline mb-2\">{{ post.title }}</h3>\n      <p>{{ post.content }}</p>\n      \n      <!-- 显示图片 -->\n      <div v-if=\"post.image_urls && post.image_urls.length > 0\" class=\"mt-4\">\n        <v-carousel height=\"300\" hide-delimiters>\n          <v-carousel-item\n            v-for=\"(image, index) in post.image_urls.split(',')\"\n            :key=\"index\"\n            :src=\"image.trim()\"\n            cover\n          ></v-carousel-item>\n        </v-carousel>\n      </div>\n    </v-card-text>\n\n    <v-card-actions>\n      <v-btn variant=\"text\" @click=\"toggleLike(post)\">\n        <v-icon :color=\"post.liked ? 'red' : ''\">\n          {{ post.liked ? 'mdi-heart' : 'mdi-heart-outline' }}\n        </v-icon>\n        <span class=\"ml-1\">{{ post.likes_count }}</span>\n      </v-btn>\n      \n      <v-btn variant=\"text\" @click=\"toggleComment\">\n        <v-icon>mdi-comment-outline</v-icon>\n        <span class=\"ml-1\">{{ post.comments_count }}</span>\n      </v-btn>\n      \n      <v-spacer></v-spacer>\n      \n      <v-btn variant=\"text\" @click=\"sharePost\">\n        <v-icon>mdi-share</v-icon>\n      </v-btn>\n    </v-card-actions>\n    \n    <!-- 评论区域 -->\n    <v-expand-transition>\n      <v-card-text v-show=\"showComments\">\n        <v-textarea\n          v-model=\"newComment\"\n          label=\"写下你的评论...\"\n          auto-grow\n          rows=\"1\"\n          variant=\"outlined\"\n          clearable\n        ></v-textarea>\n        <v-btn \n          class=\"mt-2\" \n          color=\"primary\" \n          @click=\"addComment\"\n          :disabled=\"!newComment.trim()\"\n        >\n          发表评论\n        </v-btn>\n        \n        <v-list class=\"mt-4\">\n          <v-list-item\n            v-for=\"(comment, index) in post.comments || []\"\n            :key=\"index\"\n            class=\"mb-2\"\n          >\n            <v-list-item-avatar>\n              <v-img :src=\"comment.avatar || 'https://cdn.vuetifyjs.com/images/john.jpg'\" alt=\"Commenter\"></v-img>\n            </v-list-item-avatar>\n            \n            <v-list-item-content>\n              <v-list-item-title>{{ comment.author_name }}</v-list-item-title>\n              <v-list-item-subtitle>{{ comment.content }}</v-list-item-subtitle>\n            </v-list-item-content>\n            \n            <v-list-item-action>\n              <v-btn icon x-small>\n                <v-icon color=\"grey lighten-1\">mdi-thumb-up-outline</v-icon>\n              </v-btn>\n            </v-list-item-action>\n          </v-list-item>\n        </v-list>\n      </v-card-text>\n    </v-expand-transition>\n  </v-card>\n</template>\n\n<script>\nexport default {\n  name: 'PostCard',\n  props: {\n    post: {\n      type: Object,\n      required: true\n    }\n  },\n  data() {\n    return {\n      showComments: false,\n      newComment: ''\n    };\n  },\n  methods: {\n    formatDate(dateString) {\n      const date = new Date(dateString);\n      return date.toLocaleString();\n    },\n    toggleLike(post) {\n      post.liked = !post.liked;\n      post.likes_count += post.liked ? 1 : -1;\n    },\n    toggleComment() {\n      this.showComments = !this.showComments;\n    },\n    addComment() {\n      if (!this.newComment.trim()) return;\n      \n      // 这里应该调用API添加评论\n      const comment = {\n        id: Date.now(),\n        author_name: '当前用户',\n        content: this.newComment,\n        avatar: 'https://cdn.vuetifyjs.com/images/john.jpg'\n      };\n      \n      if (!this.post.comments) {\n        this.post.comments = [];\n      }\n      \n      this.post.comments.push(comment);\n      this.post.comments_count += 1;\n      this.newComment = '';\n    },\n    sharePost() {\n      // 分享功能\n      console.log('分享帖子:', this.post.id);\n    }\n  }\n};\n</script>"],"mappings":"AAiGA,eAAe;EACbA,IAAI,EAAE,UAAU;EAChBC,KAAK,EAAE;IACLC,IAAI,EAAE;MACJC,IAAI,EAAEC,MAAM;MACZC,QAAQ,EAAE;IACZ;EACF,CAAC;EACDC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,YAAY,EAAE,KAAK;MACnBC,UAAU,EAAE;IACd,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACPC,UAAUA,CAACC,UAAU,EAAE;MACrB,MAAMC,IAAG,GAAI,IAAIC,IAAI,CAACF,UAAU,CAAC;MACjC,OAAOC,IAAI,CAACE,cAAc,CAAC,CAAC;IAC9B,CAAC;IACDC,UAAUA,CAACb,IAAI,EAAE;MACfA,IAAI,CAACc,KAAI,GAAI,CAACd,IAAI,CAACc,KAAK;MACxBd,IAAI,CAACe,WAAU,IAAKf,IAAI,CAACc,KAAI,GAAI,IAAI,CAAC,CAAC;IACzC,CAAC;IACDE,aAAaA,CAAA,EAAG;MACd,IAAI,CAACX,YAAW,GAAI,CAAC,IAAI,CAACA,YAAY;IACxC,CAAC;IACDY,UAAUA,CAAA,EAAG;MACX,IAAI,CAAC,IAAI,CAACX,UAAU,CAACY,IAAI,CAAC,CAAC,EAAE;;MAE7B;MACA,MAAMC,OAAM,GAAI;QACdC,EAAE,EAAET,IAAI,CAACU,GAAG,CAAC,CAAC;QACdC,WAAW,EAAE,MAAM;QACnBC,OAAO,EAAE,IAAI,CAACjB,UAAU;QACxBkB,MAAM,EAAE;MACV,CAAC;MAED,IAAI,CAAC,IAAI,CAACxB,IAAI,CAACyB,QAAQ,EAAE;QACvB,IAAI,CAACzB,IAAI,CAACyB,QAAO,GAAI,EAAE;MACzB;MAEA,IAAI,CAACzB,IAAI,CAACyB,QAAQ,CAACC,IAAI,CAACP,OAAO,CAAC;MAChC,IAAI,CAACnB,IAAI,CAAC2B,cAAa,IAAK,CAAC;MAC7B,IAAI,CAACrB,UAAS,GAAI,EAAE;IACtB,CAAC;IACDsB,SAASA,CAAA,EAAG;MACV;MACAC,OAAO,CAACC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC9B,IAAI,CAACoB,EAAE,CAAC;IACpC;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}