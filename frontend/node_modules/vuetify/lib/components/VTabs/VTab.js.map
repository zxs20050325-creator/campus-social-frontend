{"version":3,"file":"VTab.js","names":["makeVBtnProps","VBtn","useBackgroundColor","useTextColor","forwardRefs","computed","ref","VTabsSymbol","animate","genericComponent","omit","propsFactory","standardEasing","useRender","makeVTabProps","fixed","Boolean","sliderColor","String","sliderTransition","sliderTransitionDuration","Number","hideSlider","inset","direction","type","default","selectedClass","variant","VTab","name","props","setup","_ref","slots","attrs","textColorClasses","sliderColorClasses","textColorStyles","sliderColorStyles","backgroundColorClasses","insetColorClasses","backgroundColorStyles","insetColorStyles","rootEl","sliderEl","isHorizontal","isSelected","value","group","fade","nextEl","prevEl","opacity","grow","transform","shift","prevBox","getBoundingClientRect","nextBox","xy","XY","rightBottom","widthHeight","prevPos","nextPos","delta","origin","Math","sign","size","abs","scale","max","initialScale","sigma","transformOrigin","Array","fill","updateSlider","_ref2","$el","parentElement","querySelector","color","getComputedStyle","keyframes","duration","backgroundColor","easing","btnProps","filterProps","_createVNode","_mergeProps","class","style","undefined","_createElementVNode","_Fragment","text","_normalizeClass","_normalizeStyle"],"sources":["../../../src/components/VTabs/VTab.tsx"],"sourcesContent":["// Styles\nimport './VTab.sass'\n\n// Components\nimport { makeVBtnProps, VBtn } from '@/components/VBtn/VBtn'\n\n// Composables\nimport { useBackgroundColor, useTextColor } from '@/composables/color'\nimport { forwardRefs } from '@/composables/forwardRefs'\n\n// Utilities\nimport { computed, ref } from 'vue'\nimport { VTabsSymbol } from './shared'\nimport { animate, genericComponent, omit, propsFactory, standardEasing, useRender } from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\nimport type { VBtnSlots } from '@/components/VBtn/VBtn'\n\nexport const makeVTabProps = propsFactory({\n  fixed: Boolean,\n\n  sliderColor: String,\n  sliderTransition: String as PropType<'shift' | 'grow' | 'fade'>,\n  sliderTransitionDuration: [String, Number],\n  hideSlider: Boolean,\n  inset: Boolean,\n\n  direction: {\n    type: String as PropType<'horizontal' | 'vertical'>,\n    default: 'horizontal',\n  },\n\n  ...omit(makeVBtnProps({\n    selectedClass: 'v-tab--selected',\n    variant: 'text' as const,\n  }), [\n    'active',\n    'block',\n    'flat',\n    'location',\n    'position',\n    'symbol',\n  ]),\n}, 'VTab')\n\nexport const VTab = genericComponent<VBtnSlots>()({\n  name: 'VTab',\n\n  props: makeVTabProps(),\n\n  setup (props, { slots, attrs }) {\n    const {\n      textColorClasses: sliderColorClasses,\n      textColorStyles: sliderColorStyles,\n    } = useTextColor(() => props.sliderColor)\n    const {\n      backgroundColorClasses: insetColorClasses,\n      backgroundColorStyles: insetColorStyles,\n    } = useBackgroundColor(() => props.sliderColor)\n\n    const rootEl = ref<VBtn>()\n    const sliderEl = ref<HTMLElement>()\n\n    const isHorizontal = computed(() => props.direction === 'horizontal')\n    const isSelected = computed(() => rootEl.value?.group?.isSelected.value ?? false)\n\n    function fade (nextEl: HTMLElement, prevEl: HTMLElement) {\n      return { opacity: [0, 1] }\n    }\n\n    function grow (nextEl: HTMLElement, prevEl: HTMLElement) {\n      return props.direction === 'vertical'\n        ? { transform: ['scaleY(0)', 'scaleY(1)'] }\n        : { transform: ['scaleX(0)', 'scaleX(1)'] }\n    }\n\n    function shift (nextEl: HTMLElement, prevEl: HTMLElement) {\n      const prevBox = prevEl.getBoundingClientRect()\n      const nextBox = nextEl.getBoundingClientRect()\n\n      const xy = isHorizontal.value ? 'x' : 'y'\n      const XY = isHorizontal.value ? 'X' : 'Y'\n      const rightBottom = isHorizontal.value ? 'right' : 'bottom'\n      const widthHeight = isHorizontal.value ? 'width' : 'height'\n\n      const prevPos = prevBox[xy]\n      const nextPos = nextBox[xy]\n      const delta = prevPos > nextPos\n        ? prevBox[rightBottom] - nextBox[rightBottom]\n        : prevBox[xy] - nextBox[xy]\n      const origin =\n        Math.sign(delta) > 0 ? (isHorizontal.value ? 'right' : 'bottom')\n        : Math.sign(delta) < 0 ? (isHorizontal.value ? 'left' : 'top')\n        : 'center'\n      const size = Math.abs(delta) + (Math.sign(delta) < 0 ? prevBox[widthHeight] : nextBox[widthHeight])\n      const scale = size / Math.max(prevBox[widthHeight], nextBox[widthHeight]) || 0\n      const initialScale = prevBox[widthHeight] / nextBox[widthHeight] || 0\n      const sigma = 1.5\n\n      return {\n        transform: [\n          `translate${XY}(${delta}px) scale${XY}(${initialScale})`,\n          `translate${XY}(${delta / sigma}px) scale${XY}(${(scale - 1) / sigma + 1})`,\n          'none',\n        ],\n        transformOrigin: Array(3).fill(origin),\n      }\n    }\n\n    function updateSlider ({ value }: { value: boolean }) {\n      if (value) {\n        const prevEl: HTMLElement | undefined = rootEl.value?.$el.parentElement?.querySelector('.v-tab--selected .v-tab__slider')\n        const nextEl = sliderEl.value\n\n        if (!prevEl || !nextEl) return\n\n        const color = getComputedStyle(prevEl).color\n\n        const keyframes = { fade, grow, shift }[props.sliderTransition ?? 'shift'] ?? shift\n        const duration = Number(props.sliderTransitionDuration) ||\n          ({ fade: 400, grow: 350, shift: 225 }[props.sliderTransition ?? 'shift'] ?? 225)\n\n        animate(nextEl, {\n          backgroundColor: [color, 'currentcolor'],\n          ...keyframes(nextEl, prevEl),\n        }, {\n          duration,\n          easing: standardEasing,\n        })\n      }\n    }\n\n    useRender(() => {\n      const btnProps = VBtn.filterProps(props)\n\n      return (\n        <VBtn\n          symbol={ VTabsSymbol }\n          ref={ rootEl }\n          class={[\n            'v-tab',\n            props.class,\n            isSelected.value && props.inset ? insetColorClasses.value : [],\n          ]}\n          style={[\n            props.style,\n            isSelected.value && props.inset ? insetColorStyles.value : [],\n          ]}\n          tabindex={ isSelected.value ? 0 : -1 }\n          role=\"tab\"\n          aria-selected={ String(isSelected.value) }\n          active={ false }\n          { ...btnProps }\n          { ...attrs }\n          block={ props.fixed }\n          maxWidth={ props.fixed ? 300 : undefined }\n          onGroup:selected={ updateSlider }\n        >\n          {{\n            ...slots,\n            default: () => (\n              <>\n                { slots.default?.() ?? props.text }\n\n                { !props.hideSlider && (\n                  <div\n                    ref={ sliderEl }\n                    class={[\n                      'v-tab__slider',\n                      sliderColorClasses.value,\n                    ]}\n                    style={ sliderColorStyles.value }\n                  />\n                )}\n              </>\n            ),\n          }}\n        </VBtn>\n      )\n    })\n\n    return forwardRefs({}, rootEl)\n  },\n})\n\nexport type VTab = InstanceType<typeof VTab>\n"],"mappings":"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","ignoreList":[]}