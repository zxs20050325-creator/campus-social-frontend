{"version":3,"file":"VTimePickerClock.js","names":["useBackgroundColor","useTextColor","computed","onScopeDispose","ref","watch","debounce","genericComponent","propsFactory","useRender","makeVTimePickerClockProps","allowedValues","Function","ampm","Boolean","color","String","disabled","displayedValue","double","format","type","default","val","max","Number","required","min","scrollable","readonly","rotate","step","modelValue","VTimePickerClock","name","props","emits","change","input","setup","_ref","emit","clockRef","innerClockRef","inputValue","undefined","isDragging","valueOnMouseDown","valueOnMouseUp","emitChangeDebounced","value","textColorClasses","textColorStyles","backgroundColorClasses","backgroundColorStyles","count","roundCount","degreesPerUnit","degrees","Math","PI","innerRadiusScale","genChildren","children","push","update","isAllowed","wheel","e","preventDefault","delta","sign","deltaY","isInner","handScale","getPosition","rotateRadians","x","sin","y","cos","angleToValue","angle","insideClick","round","getTransform","i","left","top","euclidean","p0","p1","dx","dy","sqrt","center","atan2","abs","setMouseDownValue","onDragMove","width","getBoundingClientRect","innerWidth","clientX","clientY","touches","coords","handAngle","checksCount","ceil","onMouseDown","window","addEventListener","onMouseUp","stopPropagation","removeListeners","removeEventListener","_createElementVNode","_normalizeClass","_normalizeStyle","transform","map","isActive"],"sources":["../../../src/components/VTimePicker/VTimePickerClock.tsx"],"sourcesContent":["// Styles\nimport './VTimePickerClock.sass'\n\n// Composables\nimport { useBackgroundColor, useTextColor } from '@/composables/color'\n\n// Utilities\nimport { computed, onScopeDispose, ref, watch } from 'vue'\nimport { debounce, genericComponent, propsFactory, useRender } from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\ninterface Point {\n  x: number\n  y: number\n}\n\nexport const makeVTimePickerClockProps = propsFactory({\n  allowedValues: Function as PropType<(value: number) => boolean>,\n  ampm: Boolean,\n  color: String,\n  disabled: Boolean,\n  displayedValue: null,\n  double: Boolean,\n  format: {\n    type: Function,\n    default: (val: string | number) => val,\n  },\n  max: {\n    type: Number,\n    required: true,\n  },\n  min: {\n    type: Number,\n    required: true,\n  },\n  scrollable: Boolean,\n  readonly: Boolean,\n  rotate: {\n    type: Number,\n    default: 0,\n  },\n  step: {\n    type: Number,\n    default: 1,\n  },\n  modelValue: {\n    type: Number,\n  },\n}, 'VTimePickerClock')\n\nexport const VTimePickerClock = genericComponent()({\n  name: 'VTimePickerClock',\n\n  props: makeVTimePickerClockProps(),\n\n  emits: {\n    change: (val: number) => true,\n    input: (val: number) => true,\n  },\n\n  setup (props, { emit }) {\n    const clockRef = ref<HTMLElement | null>(null)\n    const innerClockRef = ref<HTMLElement | null>(null)\n    const inputValue = ref<number | undefined>(undefined)\n    const isDragging = ref(false)\n    const valueOnMouseDown = ref(null as number | null)\n    const valueOnMouseUp = ref(null as number | null)\n    const emitChangeDebounced = debounce((value: number) => emit('change', value), 750)\n\n    const { textColorClasses, textColorStyles } = useTextColor(() => props.color)\n    const { backgroundColorClasses, backgroundColorStyles } = useBackgroundColor(() => props.color)\n\n    const count = computed(() => props.max - props.min + 1)\n    const roundCount = computed(() => props.double ? (count.value / 2) : count.value)\n    const degreesPerUnit = computed(() => 360 / roundCount.value)\n    const degrees = computed(() => degreesPerUnit.value * Math.PI / 180)\n    const displayedValue = computed(() => props.modelValue == null ? props.min : props.modelValue)\n    const innerRadiusScale = computed(() => 0.62)\n\n    const genChildren = computed(() => {\n      const children = []\n      for (let value = props.min; value <= props.max; value = value + props.step) {\n        children.push(value)\n      }\n      return children\n    })\n\n    watch(() => props.modelValue, val => {\n      inputValue.value = val\n    })\n\n    function update (value: number) {\n      if (inputValue.value !== value) {\n        inputValue.value = value\n      }\n      emit('input', value)\n    }\n\n    function isAllowed (value: number) {\n      return !props.allowedValues || props.allowedValues(value)\n    }\n\n    function wheel (e: WheelEvent) {\n      if (!props.scrollable || props.disabled) return\n\n      e.preventDefault()\n\n      const delta = Math.sign(-e.deltaY || 1)\n      let value = displayedValue.value\n      do {\n        value = value + delta\n        value = (value - props.min + count.value) % count.value + props.min\n      } while (!isAllowed(value) && value !== displayedValue.value)\n\n      if (value !== props.displayedValue) {\n        update(value)\n      }\n\n      emitChangeDebounced(value)\n    }\n\n    function isInner (value: number) {\n      return props.double && (value - props.min >= roundCount.value)\n    }\n\n    function handScale (value: number) {\n      return isInner(value) ? innerRadiusScale.value : 1\n    }\n\n    function getPosition (value: number) {\n      const rotateRadians = props.rotate * Math.PI / 180\n      return {\n        x: Math.sin((value - props.min) * degrees.value + rotateRadians) * handScale(value),\n        y: -Math.cos((value - props.min) * degrees.value + rotateRadians) * handScale(value),\n      }\n    }\n\n    function angleToValue (angle: number, insideClick: boolean): number {\n      const value = (\n        Math.round(angle / degreesPerUnit.value) +\n        (insideClick ? roundCount.value : 0)\n      ) % count.value + props.min\n\n      // Necessary to fix edge case when selecting left part of the value(s) at 12 o'clock\n      if (angle < (360 - degreesPerUnit.value / 2)) return value\n\n      return insideClick ? props.max - roundCount.value + 1 : props.min\n    }\n\n    function getTransform (i: number) {\n      const { x, y } = getPosition(i)\n      return {\n        left: `${Math.round(50 + x * 50)}%`,\n        top: `${Math.round(50 + y * 50)}%`,\n      }\n    }\n\n    function euclidean (p0: Point, p1: Point) {\n      const dx = p1.x - p0.x\n      const dy = p1.y - p0.y\n\n      return Math.sqrt(dx * dx + dy * dy)\n    }\n\n    function angle (center: Point, p1: Point) {\n      const value = 2 * Math.atan2(p1.y - center.y - euclidean(center, p1), p1.x - center.x)\n      return Math.abs(value * 180 / Math.PI)\n    }\n\n    function setMouseDownValue (value: number) {\n      if (valueOnMouseDown.value === null) {\n        valueOnMouseDown.value = value\n      }\n\n      valueOnMouseUp.value = value\n      update(value)\n    }\n\n    function onDragMove (e: MouseEvent | TouchEvent) {\n      e.preventDefault()\n      if ((!isDragging.value && e.type !== 'click') || !clockRef.value) return\n      const { width, top, left } = clockRef.value?.getBoundingClientRect()\n      const { width: innerWidth }: DOMRect = innerClockRef.value?.getBoundingClientRect() ?? { width: 0 } as DOMRect\n      const { clientX, clientY } = 'touches' in e ? e.touches[0] : e\n      const center = { x: width / 2, y: -width / 2 }\n      const coords = { x: clientX - left, y: top - clientY }\n      const handAngle = Math.round(angle(center, coords) - props.rotate + 360) % 360\n      const insideClick = props.double && euclidean(center, coords) < (innerWidth as number + innerWidth * innerRadiusScale.value) / 4\n      const checksCount = Math.ceil(15 / degreesPerUnit.value)\n      let value\n\n      for (let i = 0; i < checksCount; i++) {\n        value = angleToValue(handAngle + i * degreesPerUnit.value, insideClick)\n        if (isAllowed(value)) return setMouseDownValue(value)\n\n        value = angleToValue(handAngle - i * degreesPerUnit.value, insideClick)\n        if (isAllowed(value)) return setMouseDownValue(value)\n      }\n    }\n\n    function onMouseDown (e: MouseEvent | TouchEvent) {\n      if (props.disabled) return\n\n      e.preventDefault()\n\n      window.addEventListener('mousemove', onDragMove)\n      window.addEventListener('touchmove', onDragMove)\n      window.addEventListener('mouseup', onMouseUp)\n      window.addEventListener('touchend', onMouseUp)\n      valueOnMouseDown.value = null\n      valueOnMouseUp.value = null\n      isDragging.value = true\n      onDragMove(e)\n    }\n\n    function onMouseUp (e: MouseEvent | TouchEvent) {\n      e.stopPropagation()\n      removeListeners()\n\n      isDragging.value = false\n      if (valueOnMouseUp.value !== null && isAllowed(valueOnMouseUp.value)) {\n        emit('change', valueOnMouseUp.value)\n      }\n    }\n\n    function removeListeners () {\n      window.removeEventListener('mousemove', onDragMove)\n      window.removeEventListener('touchmove', onDragMove)\n      window.removeEventListener('mouseup', onMouseUp)\n      window.removeEventListener('touchend', onMouseUp)\n    }\n\n    onScopeDispose(removeListeners)\n\n    useRender(() => {\n      return (\n        <div\n          class={[\n            {\n              'v-time-picker-clock': true,\n              'v-time-picker-clock--indeterminate': props.modelValue == null,\n              'v-time-picker-clock--readonly': props.readonly,\n            },\n          ]}\n          onMousedown={ onMouseDown }\n          onTouchstart={ onMouseDown }\n          onWheel={ wheel }\n          ref={ clockRef }\n        >\n          <div class=\"v-time-picker-clock__inner\" ref={ innerClockRef }>\n            <div\n              class={[\n                {\n                  'v-time-picker-clock__hand': true,\n                  'v-time-picker-clock__hand--inner': isInner(props.modelValue as number),\n                },\n                textColorClasses.value,\n              ]}\n              style={[\n                {\n                  transform: `rotate(${props.rotate + degreesPerUnit.value * (displayedValue.value - props.min)}deg) scaleY(${handScale(displayedValue.value)})`,\n                },\n                textColorStyles.value,\n              ]}\n            />\n\n            {\n              genChildren.value.map(value => {\n                const isActive = value === displayedValue.value\n\n                return (\n                  <div\n                    class={[\n                      {\n                        'v-time-picker-clock__item': true,\n                        'v-time-picker-clock__item--active': isActive,\n                        'v-time-picker-clock__item--disabled': props.disabled || !isAllowed(value),\n                      },\n                      isActive && backgroundColorClasses.value,\n                    ]}\n                    style={[\n                      getTransform(value),\n                      isActive && backgroundColorStyles.value,\n                    ]}\n                  >\n                    <span>{ props.format(value) }</span>\n                  </div>\n                )\n              })\n            }\n          </div>\n        </div>\n      )\n    })\n  },\n})\n\nexport type VTimePickerClock = InstanceType<typeof VTimePickerClock>\n"],"mappings":"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","ignoreList":[]}