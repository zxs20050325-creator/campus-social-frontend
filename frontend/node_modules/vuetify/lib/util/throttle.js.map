{"version":3,"file":"throttle.js","names":["throttle","fn","delay","options","arguments","length","undefined","leading","trailing","timeoutId","lastExec","throttling","start","clear","clearTimeout","wrap","_len","args","Array","_key","now","Date","elapsed","Math","max","invoke","setTimeout","immediate"],"sources":["../../src/util/throttle.ts"],"sourcesContent":["export function throttle<T extends (...args: any[]) => any> (\n  fn: T,\n  delay: number,\n  options = { leading: true, trailing: true },\n) {\n  let timeoutId = 0 as any\n  let lastExec = 0\n  let throttling = false\n  let start = 0\n\n  function clear () {\n    clearTimeout(timeoutId)\n    throttling = false\n    start = 0\n  }\n\n  const wrap = (...args: Parameters<T>): void | ReturnType<T> => {\n    clearTimeout(timeoutId)\n\n    const now = Date.now()\n\n    if (!start) start = now\n    const elapsed = now - Math.max(start, lastExec)\n\n    function invoke () {\n      lastExec = Date.now()\n      timeoutId = setTimeout(clear, delay)\n      fn(...args)\n    }\n\n    if (!throttling) {\n      throttling = true\n      if (options.leading) {\n        invoke()\n      }\n    } else if (elapsed >= delay) {\n      invoke()\n    } else if (options.trailing) {\n      timeoutId = setTimeout(invoke, delay - elapsed)\n    }\n  }\n\n  wrap.clear = clear\n  wrap.immediate = fn\n  return wrap\n}\n"],"mappings":"AAAA,OAAO,SAASA,QAAQA,CACtBC,EAAK,EACLC,KAAa,EAEb;EAAA,IADAC,OAAO,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG;IAAEG,OAAO,EAAE,IAAI;IAAEC,QAAQ,EAAE;EAAK,CAAC;EAE3C,IAAIC,SAAS,GAAG,CAAQ;EACxB,IAAIC,QAAQ,GAAG,CAAC;EAChB,IAAIC,UAAU,GAAG,KAAK;EACtB,IAAIC,KAAK,GAAG,CAAC;EAEb,SAASC,KAAKA,CAAA,EAAI;IAChBC,YAAY,CAACL,SAAS,CAAC;IACvBE,UAAU,GAAG,KAAK;IAClBC,KAAK,GAAG,CAAC;EACX;EAEA,MAAMG,IAAI,GAAG,SAAAA,CAAA,EAAkD;IAAA,SAAAC,IAAA,GAAAZ,SAAA,CAAAC,MAAA,EAA9CY,IAAI,OAAAC,KAAA,CAAAF,IAAA,GAAAG,IAAA,MAAAA,IAAA,GAAAH,IAAA,EAAAG,IAAA;MAAJF,IAAI,CAAAE,IAAA,IAAAf,SAAA,CAAAe,IAAA;IAAA;IACnBL,YAAY,CAACL,SAAS,CAAC;IAEvB,MAAMW,GAAG,GAAGC,IAAI,CAACD,GAAG,CAAC,CAAC;IAEtB,IAAI,CAACR,KAAK,EAAEA,KAAK,GAAGQ,GAAG;IACvB,MAAME,OAAO,GAAGF,GAAG,GAAGG,IAAI,CAACC,GAAG,CAACZ,KAAK,EAAEF,QAAQ,CAAC;IAE/C,SAASe,MAAMA,CAAA,EAAI;MACjBf,QAAQ,GAAGW,IAAI,CAACD,GAAG,CAAC,CAAC;MACrBX,SAAS,GAAGiB,UAAU,CAACb,KAAK,EAAEX,KAAK,CAAC;MACpCD,EAAE,CAAC,GAAGgB,IAAI,CAAC;IACb;IAEA,IAAI,CAACN,UAAU,EAAE;MACfA,UAAU,GAAG,IAAI;MACjB,IAAIR,OAAO,CAACI,OAAO,EAAE;QACnBkB,MAAM,CAAC,CAAC;MACV;IACF,CAAC,MAAM,IAAIH,OAAO,IAAIpB,KAAK,EAAE;MAC3BuB,MAAM,CAAC,CAAC;IACV,CAAC,MAAM,IAAItB,OAAO,CAACK,QAAQ,EAAE;MAC3BC,SAAS,GAAGiB,UAAU,CAACD,MAAM,EAAEvB,KAAK,GAAGoB,OAAO,CAAC;IACjD;EACF,CAAC;EAEDP,IAAI,CAACF,KAAK,GAAGA,KAAK;EAClBE,IAAI,CAACY,SAAS,GAAG1B,EAAE;EACnB,OAAOc,IAAI;AACb","ignoreList":[]}