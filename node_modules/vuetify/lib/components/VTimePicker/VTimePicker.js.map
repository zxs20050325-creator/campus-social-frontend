{"version":3,"file":"VTimePicker.js","names":["VTimePickerClock","VTimePickerControls","makeVPickerProps","VPicker","makeDensityProps","useDensity","useLocale","useProxiedModel","computed","onMounted","ref","toRef","watch","convert12to24","convert24to12","pad","createRange","genericComponent","omit","propsFactory","useRender","rangeHours24","rangeHours12am","rangeHours12pm","map","v","range60","makeVTimePickerProps","allowedHours","Function","Array","allowedMinutes","allowedSeconds","disabled","Boolean","format","type","String","default","max","min","viewMode","period","validator","includes","modelValue","readonly","scrollable","useSeconds","variant","title","VTimePicker","name","props","emits","val","setup","_ref","emit","slots","t","densityClasses","inputHour","inputMinute","inputSecond","lazyInputHour","lazyInputMinute","lazyInputSecond","controlsRef","clockRef","isAllowedHourCb","cb","minHour","Number","split","maxHour","isAllowedMinuteCb","isHourAllowed","value","minMinute","maxMinute","minTime","maxTime","time","isAllowedSecondCb","isMinuteAllowed","minSecond","maxSecond","isAmPm","shouldClear","emitValue","genValue","setPeriod","setInputData","old","Date","getHours","getMinutes","getSeconds","hour","minute","second","trim","toLowerCase","match","parseInt","firstAllowed","allowedFn","range","first","find","length","newHour","onInput","onChange","emitChange","pickerProps","filterProps","timePickerControlsProps","timePickerClockProps","_createVNode","_mergeProps","undefined","class","hideHeader","style","_createElementVNode","header","actions"],"sources":["../../../src/components/VTimePicker/VTimePicker.tsx"],"sourcesContent":["// Styles\nimport './VTimePicker.sass'\n\n// Components\nimport { VTimePickerClock } from './VTimePickerClock'\nimport { VTimePickerControls } from './VTimePickerControls'\nimport { makeVPickerProps, VPicker } from '@/labs/VPicker/VPicker'\n\n// Composables\nimport { makeDensityProps, useDensity } from '@/composables/density'\nimport { useLocale } from '@/composables/locale'\nimport { useProxiedModel } from '@/composables/proxiedModel'\n\n// Utilities\nimport { computed, onMounted, ref, toRef, watch } from 'vue'\nimport { convert12to24, convert24to12, pad } from './util'\nimport { createRange, genericComponent, omit, propsFactory, useRender } from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\nimport type { Period, VTimePickerViewMode } from './shared'\nimport type { VPickerSlots } from '@/labs/VPicker/VPicker'\n\ntype AllowFunction = (val: number) => boolean\n\nconst rangeHours24 = createRange(24)\nconst rangeHours12am = createRange(12)\nconst rangeHours12pm = rangeHours12am.map(v => v + 12)\nconst range60 = createRange(60)\n\nexport type VTimePickerSlots = Omit<VPickerSlots, 'header'>\n\ntype Variant = 'dial' | 'input'\n\nexport const makeVTimePickerProps = propsFactory({\n  allowedHours: [Function, Array] as PropType<AllowFunction | number[]>,\n  allowedMinutes: [Function, Array] as PropType<AllowFunction | number[]>,\n  allowedSeconds: [Function, Array] as PropType<AllowFunction | number[]>,\n  disabled: Boolean,\n  format: {\n    type: String as PropType<'ampm' | '24hr'>,\n    default: 'ampm',\n  },\n  max: String,\n  min: String,\n  viewMode: {\n    type: String as PropType<VTimePickerViewMode>,\n    default: 'hour',\n  },\n  period: {\n    type: String as PropType<Period>,\n    default: 'am',\n    validator: (v: any) => ['am', 'pm'].includes(v),\n  },\n  modelValue: null as any as PropType<any>,\n  readonly: Boolean,\n  scrollable: Boolean,\n  useSeconds: Boolean,\n  variant: {\n    type: String as PropType<Variant>,\n    default: 'dial',\n  },\n  ...omit(makeVPickerProps({ title: '$vuetify.timePicker.title' }), ['landscape']),\n  ...makeDensityProps(),\n}, 'VTimePicker')\n\nexport const VTimePicker = genericComponent<VTimePickerSlots>()({\n  name: 'VTimePicker',\n\n  props: makeVTimePickerProps(),\n\n  emits: {\n    'update:hour': (val: number) => true,\n    'update:minute': (val: number) => true,\n    'update:period': (val: Period) => true,\n    'update:second': (val: number) => true,\n    'update:modelValue': (val: string | null) => true,\n    'update:viewMode': (val: VTimePickerViewMode) => true,\n  },\n\n  setup (props, { emit, slots }) {\n    const { t } = useLocale()\n    const { densityClasses } = useDensity(props)\n    const inputHour = ref(null as number | null)\n    const inputMinute = ref(null as number | null)\n    const inputSecond = ref(null as number | null)\n    const lazyInputHour = ref(null as number | null)\n    const lazyInputMinute = ref(null as number | null)\n    const lazyInputSecond = ref(null as number | null)\n    const period = useProxiedModel(props, 'period', 'am')\n    const viewMode = useProxiedModel(props, 'viewMode', 'hour')\n    const controlsRef = ref<VTimePickerControls | null>(null)\n    const clockRef = ref<VTimePickerClock | null>(null)\n\n    const isAllowedHourCb = computed((): AllowFunction => {\n      let cb: AllowFunction\n\n      if (props.allowedHours instanceof Array) {\n        cb = (val: number) => (props.allowedHours as number[]).includes(val)\n      } else {\n        cb = props.allowedHours as AllowFunction\n      }\n\n      if (!props.min && !props.max) return cb\n\n      const minHour = props.min ? Number(props.min.split(':')[0]) : 0\n      const maxHour = props.max ? Number(props.max.split(':')[0]) : 23\n\n      return (val: number) => {\n        return val >= Number(minHour) &&\n          val <= Number(maxHour) &&\n          (!cb || cb(val))\n      }\n    })\n\n    const isAllowedMinuteCb = computed((): AllowFunction => {\n      let cb: AllowFunction\n\n      const isHourAllowed = !isAllowedHourCb.value || inputHour.value === null || isAllowedHourCb.value(inputHour.value)\n      if (props.allowedMinutes instanceof Array) {\n        cb = (val: number) => (props.allowedMinutes as number[]).includes(val)\n      } else {\n        cb = props.allowedMinutes as AllowFunction\n      }\n\n      if (!props.min && !props.max) {\n        return isHourAllowed ? cb : () => false\n      }\n\n      const [minHour, minMinute] = props.min ? props.min.split(':').map(Number) : [0, 0]\n      const [maxHour, maxMinute] = props.max ? props.max.split(':').map(Number) : [23, 59]\n      const minTime = minHour * 60 + Number(minMinute)\n      const maxTime = maxHour * 60 + Number(maxMinute)\n\n      return (val: number) => {\n        const time = 60 * inputHour.value! + val\n        return time >= minTime &&\n          time <= maxTime &&\n          isHourAllowed &&\n          (!cb || cb(val))\n      }\n    })\n\n    const isAllowedSecondCb = computed((): AllowFunction => {\n      let cb: AllowFunction\n\n      const isHourAllowed = !isAllowedHourCb.value || inputHour.value === null || isAllowedHourCb.value(inputHour.value)\n      const isMinuteAllowed = isHourAllowed &&\n        (!isAllowedMinuteCb.value ||\n          inputMinute.value === null ||\n          isAllowedMinuteCb.value(inputMinute.value)\n        )\n\n      if (props.allowedSeconds instanceof Array) {\n        cb = (val: number) => (props.allowedSeconds as number[]).includes(val)\n      } else {\n        cb = props.allowedSeconds as AllowFunction\n      }\n\n      if (!props.min && !props.max) {\n        return isMinuteAllowed ? cb : () => false\n      }\n\n      const [minHour, minMinute, minSecond] = props.min ? props.min.split(':').map(Number) : [0, 0, 0]\n      const [maxHour, maxMinute, maxSecond] = props.max ? props.max.split(':').map(Number) : [23, 59, 59]\n      const minTime = minHour * 3600 + minMinute * 60 + Number(minSecond || 0)\n      const maxTime = maxHour * 3600 + maxMinute * 60 + Number(maxSecond || 0)\n\n      return (val: number) => {\n        const time = 3600 * inputHour.value! + 60 * inputMinute.value! + val\n        return time >= minTime &&\n          time <= maxTime &&\n          isMinuteAllowed &&\n          (!cb || cb(val))\n      }\n    })\n\n    const isAmPm = computed((): boolean => {\n      return props.format === 'ampm'\n    })\n\n    const shouldClear = toRef(() => {\n      return props.modelValue !== null &&\n        inputHour.value === null &&\n        inputMinute.value === null &&\n        (!props.useSeconds || inputSecond.value === null)\n    })\n\n    function emitValue () {\n      const value = genValue()\n\n      if (value !== null && value !== props.modelValue) {\n        emit('update:modelValue', value)\n      }\n      if (shouldClear.value) {\n        emit('update:modelValue', null)\n      }\n    }\n\n    watch(inputHour, emitValue)\n    watch(inputMinute, emitValue)\n    watch(inputSecond, emitValue)\n\n    watch(() => props.period, val => setPeriod(val))\n\n    watch(() => props.modelValue, val => setInputData(val))\n\n    watch(() => props.useSeconds, (val, old) => {\n      if (old && !val && viewMode.value === 'second') {\n        viewMode.value = 'minute'\n      }\n      if (!val && inputSecond.value !== null) {\n        inputSecond.value = null\n      }\n    })\n\n    onMounted(() => {\n      setInputData(props.modelValue)\n    })\n\n    function genValue () {\n      if (inputHour.value != null && inputMinute.value != null && (!props.useSeconds || inputSecond.value != null)) {\n        return `${pad(inputHour.value)}:${pad(inputMinute.value)}` + (props.useSeconds ? `:${pad(inputSecond.value!)}` : '')\n      }\n\n      return null\n    }\n\n    function setInputData (value: string | null | Date) {\n      if (value == null || value === '') {\n        inputHour.value = null\n        inputMinute.value = null\n        inputSecond.value = null\n      } else if (value instanceof Date) {\n        inputHour.value = value.getHours()\n        inputMinute.value = value.getMinutes()\n        inputSecond.value = value.getSeconds()\n      } else {\n        const [hour, , minute, , second, period] = value.trim().toLowerCase().match(/^(\\d+):(\\d+)(:(\\d+))?([ap]m)?$/) || new Array(6)\n\n        inputHour.value = period ? convert12to24(parseInt(hour, 10), period as Period) : parseInt(hour, 10)\n        inputMinute.value = parseInt(minute, 10)\n        inputSecond.value = parseInt(second || 0, 10)\n      }\n\n      period.value = (inputHour.value == null || inputHour.value < 12) ? 'am' : 'pm'\n    }\n\n    function firstAllowed (type: VTimePickerViewMode, value: number) {\n      const allowedFn = type === 'hour' ? isAllowedHourCb.value : (type === 'minute' ? isAllowedMinuteCb.value : isAllowedSecondCb.value)\n      if (!allowedFn) return value\n\n      // TODO: clean up (Note from V2 code)\n      const range = type === 'minute'\n        ? range60\n        : (type === 'second'\n          ? range60\n          : (isAmPm.value\n            ? (value < 12\n              ? rangeHours12am\n              : rangeHours12pm)\n            : rangeHours24))\n      const first = range.find(v => allowedFn((v + value) % range.length + range[0]))\n      return ((first || 0) + value) % range.length + range[0]\n    }\n\n    function setPeriod (val: Period) {\n      period.value = val\n      if (inputHour.value != null) {\n        const newHour = inputHour.value! + (period.value === 'am' ? -12 : 12)\n        inputHour.value = firstAllowed('hour', newHour)\n      }\n      emit('update:period', val)\n      emitValue()\n      return true\n    }\n\n    function onInput (value: number) {\n      if (viewMode.value === 'hour') {\n        inputHour.value = isAmPm.value ? convert12to24(value, period.value) : value\n      } else if (viewMode.value === 'minute') {\n        inputMinute.value = value\n      } else {\n        inputSecond.value = value\n      }\n    }\n\n    function onChange (value: number) {\n      switch (viewMode.value || 'hour') {\n        case 'hour':\n          emit('update:hour', value)\n          break\n        case 'minute':\n          emit('update:minute', value)\n          break\n        case 'second':\n          emit('update:second', value)\n          break\n        default:\n          break\n      }\n\n      const emitChange = inputHour.value !== null && inputMinute.value !== null && (props.useSeconds ? inputSecond.value !== null : true)\n      if (viewMode.value === 'hour') {\n        viewMode.value = 'minute'\n      } else if (props.useSeconds && viewMode.value === 'minute') {\n        viewMode.value = 'second'\n      }\n\n      if (inputHour.value === lazyInputHour.value &&\n        inputMinute.value === lazyInputMinute.value &&\n        (!props.useSeconds || inputSecond.value === lazyInputSecond.value)\n      ) return\n\n      const time = genValue()\n      if (time === null) return\n\n      lazyInputHour.value = inputHour.value\n      lazyInputMinute.value = inputMinute.value\n      props.useSeconds && (lazyInputSecond.value = inputSecond.value)\n\n      emitChange && emitValue()\n    }\n\n    useRender(() => {\n      const pickerProps = omit(VPicker.filterProps(props), ['hideHeader'])\n      const timePickerControlsProps = VTimePickerControls.filterProps(props)\n      const timePickerClockProps = VTimePickerClock.filterProps(omit(props, ['format', 'modelValue', 'min', 'max']))\n\n      return (\n        <VPicker\n          { ...pickerProps }\n          color={ undefined }\n          class={[\n            'v-time-picker',\n            `v-time-picker--variant-${props.variant}`,\n            props.class,\n            densityClasses.value,\n          ]}\n          hideHeader={ props.hideHeader && props.variant !== 'input' }\n          style={ props.style }\n          v-slots={{\n            title: () => slots.title?.() ?? (\n              <div class=\"v-time-picker__title\">\n                { t(props.title) }\n              </div>\n            ),\n            header: () => (\n              <VTimePickerControls\n                { ...timePickerControlsProps }\n                ampm={ isAmPm.value }\n                hour={ inputHour.value as number }\n                minute={ inputMinute.value as number }\n                period={ period.value }\n                second={ inputSecond.value as number }\n                viewMode={ viewMode.value }\n                onUpdate:hour={ (val: number) => inputHour.value = val }\n                onUpdate:minute={ (val: number) => inputMinute.value = val }\n                onUpdate:period={ (val: Period) => setPeriod(val) }\n                onUpdate:second={ (val: number) => inputSecond.value = val }\n                onUpdate:viewMode={ (value: VTimePickerViewMode) => (viewMode.value = value) }\n                ref={ controlsRef }\n              />\n            ),\n            default: () => (\n              <VTimePickerClock\n                { ...timePickerClockProps }\n                allowedValues={\n                  viewMode.value === 'hour'\n                    ? isAllowedHourCb.value\n                    : (viewMode.value === 'minute'\n                      ? isAllowedMinuteCb.value\n                      : isAllowedSecondCb.value)\n                    }\n                double={ viewMode.value === 'hour' && !isAmPm.value }\n                format={ viewMode.value === 'hour'\n                  ? (isAmPm.value ? convert24to12 : (val: number) => val)\n                  : (val: number) => pad(val, 2)\n                }\n                max={ viewMode.value === 'hour' ? (isAmPm.value && period.value === 'am' ? 11 : 23) : 59 }\n                min={ viewMode.value === 'hour' && isAmPm.value && period.value === 'pm' ? 12 : 0 }\n                size={ 20 }\n                step={ viewMode.value === 'hour' ? 1 : 5 }\n                modelValue={ viewMode.value === 'hour'\n                  ? inputHour.value as number\n                  : (viewMode.value === 'minute'\n                    ? inputMinute.value as number\n                    : inputSecond.value as number)\n                }\n                onChange={ onChange }\n                onInput={ onInput }\n                ref={ clockRef }\n              />\n            ),\n            actions: slots.actions,\n          }}\n        />\n      )\n    })\n  },\n})\n\nexport type VTimePicker = InstanceType<typeof VTimePicker>\n"],"mappings":"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","ignoreList":[]}