{"version":3,"file":"VDialog.spec.browser.js","names":["VDialog","commands","render","screen","userEvent","nextTick","ref","describe","it","model","_createElementVNode","_createVNode","value","$event","default","_createTextVNode","expect","queryByTestId","toBeNull","findByTestId","resolves","toBeVisible","element","click","poll","toBeFalsy","onAfterLeave","vi","fn","toHaveBeenCalledTimes","first","getByCSS","last","focus","document","activeElement","toBe","tab","shift"],"sources":["../../../../src/components/VDialog/__test__/VDialog.spec.browser.tsx"],"sourcesContent":["// Components\nimport { VDialog } from '../VDialog'\n\n// Utilities\nimport { commands, render, screen, userEvent } from '@test'\nimport { nextTick, ref } from 'vue'\n\n// Tests\ndescribe('VDialog', () => {\n  it('should render correctly', async () => {\n    const model = ref(false)\n    render(() => (\n      <div>\n        <VDialog v-model={ model.value } data-testid=\"dialog\">\n          <div data-testid=\"content\">Content</div>\n        </VDialog>\n      </div>\n    ))\n\n    expect(screen.queryByTestId('dialog')).toBeNull()\n\n    model.value = true\n    await nextTick()\n    await expect(screen.findByTestId('dialog')).resolves.toBeVisible()\n    await expect.element(await screen.findByTestId('content')).toBeVisible()\n\n    await commands.click(0, 0)\n    await expect.poll(() => model.value).toBeFalsy()\n    await expect.poll(() => screen.queryByTestId('dialog')).toBeNull()\n    await expect.poll(() => screen.queryByTestId('content')).toBeNull()\n  })\n\n  it('should emit afterLeave', async () => {\n    const model = ref(true)\n    const onAfterLeave = vi.fn()\n    render(() => (\n      <div>\n        <VDialog v-model={ model.value } onAfterLeave={ onAfterLeave }>\n          <div data-test=\"content\">Content</div>\n        </VDialog>\n      </div>\n    ))\n\n    await commands.click(0, 0)\n    await expect.poll(() => onAfterLeave).toHaveBeenCalledTimes(1)\n  })\n\n  it('should focus on the last element when shift + tab key is pressed on the first element', async () => {\n    const model = ref(true)\n    render(() => (\n      <div>\n        <VDialog v-model={ model.value } persistent>\n          <div>\n            <button data-testid=\"first\">First</button>\n            <button data-testid=\"last\">Last</button>\n          </div>\n        </VDialog>\n      </div>\n    ))\n    const first = screen.getByCSS('button[data-testid=\"first\"]')\n    const last = screen.getByCSS('button[data-testid=\"last\"]')\n\n    first.focus()\n    await expect.poll(() => document.activeElement).toBe(first)\n\n    await userEvent.tab({ shift: true })\n    await expect.poll(() => document.activeElement).toBe(last)\n  })\n\n  it('should focus on the first element when Tab key is pressed on the last element', async () => {\n    const model = ref(true)\n    render(() => (\n      <div>\n        <VDialog v-model={ model.value }>\n          <div>\n            <button data-testid=\"first\">First</button>\n            <button data-testid=\"last\">Last</button>\n          </div>\n        </VDialog>\n      </div>\n    ))\n    const first = screen.getByCSS('button[data-testid=\"first\"]')\n    const last = screen.getByCSS('button[data-testid=\"last\"]')\n\n    last.focus()\n    await expect.poll(() => document.activeElement).toBe(last)\n\n    await userEvent.tab()\n    await expect.poll(() => document.activeElement).toBe(first)\n  })\n})\n"],"mappings":"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","ignoreList":[]}